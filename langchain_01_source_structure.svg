<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1f2937">
    04.LangChain_01.py 소스코드 구조
  </text>
  
  <!-- Environment Setup -->
  <g>
    <rect x="50" y="60" width="1100" height="80" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
    <text x="70" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e40af">
      🔧 환경 설정 (Environment Setup)
    </text>
    <text x="70" y="105" font-family="Courier, monospace" font-size="11" fill="#374151">
      import os, json, openai
    </text>
    <text x="70" y="120" font-family="Courier, monospace" font-size="11" fill="#374151">
      os.environ["OPENAI_API_KEY"] = "None"
    </text>
  </g>
  
  <!-- LLM Section -->
  <g>
    <rect x="50" y="160" width="350" height="180" rx="8" fill="#dcfce7" stroke="#10b981" stroke-width="2"/>
    <text x="225" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#059669">
      🤖 LLM (주석처리됨)
    </text>
    
    <rect x="70" y="200" width="310" height="120" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="85" y="220" font-family="Courier, monospace" font-size="10" fill="#374151">
      from langchain_openai import OpenAI
    </text>
    <text x="85" y="235" font-family="Courier, monospace" font-size="10" fill="#374151">
      model = OpenAI(
    </text>
    <text x="105" y="250" font-family="Courier, monospace" font-size="10" fill="#6b7280">
      base_url="localhost:1234/v1",
    </text>
    <text x="105" y="265" font-family="Courier, monospace" font-size="10" fill="#6b7280">
      model="openai/gpt-oss-20b"
    </text>
    <text x="85" y="280" font-family="Courier, monospace" font-size="10" fill="#374151">
      )
    </text>
    <text x="85" y="295" font-family="Courier, monospace" font-size="10" fill="#374151">
      ai_message = model.invoke("안녕하세요")
    </text>
    <text x="85" y="310" font-family="Courier, monospace" font-size="10" fill="#374151">
      print(ai_message)
    </text>
  </g>
  
  <!-- Chat Model Section -->
  <g>
    <rect x="420" y="160" width="350" height="250" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="595" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400e">
      💬 Chat Model (주석처리됨)
    </text>
    
    <rect x="440" y="200" width="310" height="190" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="455" y="220" font-family="Courier, monospace" font-size="10" fill="#374151">
      from langchain_openai import ChatOpenAI
    </text>
    <text x="455" y="235" font-family="Courier, monospace" font-size="10" fill="#374151">
      from langchain_core.messages import
    </text>
    <text x="475" y="250" font-family="Courier, monospace" font-size="10" fill="#374151">
      SystemMessage, HumanMessage, AIMessage
    </text>
    <text x="455" y="270" font-family="Courier, monospace" font-size="10" fill="#374151">
      model = ChatOpenAI(temperature=0)
    </text>
    <text x="455" y="290" font-family="Courier, monospace" font-size="10" fill="#374151">
      messages = [
    </text>
    <text x="475" y="305" font-family="Courier, monospace" font-size="9" fill="#8b5cf6">
      SystemMessage("You are helpful"),
    </text>
    <text x="475" y="320" font-family="Courier, monospace" font-size="9" fill="#059669">
      HumanMessage("안녕하세요! 존입니다"),
    </text>
    <text x="475" y="335" font-family="Courier, monospace" font-size="9" fill="#dc2626">
      AIMessage("안녕하세요, 존님!"),
    </text>
    <text x="475" y="350" font-family="Courier, monospace" font-size="9" fill="#059669">
      HumanMessage("제 이름을 아시나요?")
    </text>
    <text x="455" y="365" font-family="Courier, monospace" font-size="10" fill="#374151">
      ]
    </text>
    <text x="455" y="380" font-family="Courier, monospace" font-size="10" fill="#374151">
      ai_message = model.invoke(messages)
    </text>
  </g>
  
  <!-- Streaming Section -->
  <g>
    <rect x="790" y="160" width="350" height="180" rx="8" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="965" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#dc2626">
      🔄 Streaming (주석처리됨)
    </text>
    
    <rect x="810" y="200" width="310" height="120" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="825" y="220" font-family="Courier, monospace" font-size="10" fill="#374151">
      messages = [
    </text>
    <text x="845" y="235" font-family="Courier, monospace" font-size="10" fill="#8b5cf6">
      SystemMessage("You are helpful"),
    </text>
    <text x="845" y="250" font-family="Courier, monospace" font-size="10" fill="#059669">
      HumanMessage("안녕하세요!")
    </text>
    <text x="825" y="265" font-family="Courier, monospace" font-size="10" fill="#374151">
      ]
    </text>
    <text x="825" y="285" font-family="Courier, monospace" font-size="10" fill="#dc2626">
      for chunk in model.stream(messages):
    </text>
    <text x="845" y="300" font-family="Courier, monospace" font-size="10" fill="#dc2626">
      print(chunk.content, end="")
    </text>
  </g>
  
  <!-- Features Summary -->
  <g>
    <rect x="50" y="460" width="1100" height="120" rx="8" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2"/>
    <text x="600" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#0c4a6e">
      핵심 특징
    </text>
    
    <rect x="80" y="500" width="320" height="60" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="240" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1f2937">
      📚 학습용 구조
    </text>
    <text x="240" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      모든 코드가 주석 처리됨
    </text>
    <text x="240" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      필요시 주석 해제하여 실습
    </text>
    
    <rect x="440" y="500" width="320" height="60" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="600" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1f2937">
      🏗️ 점진적 복잡도
    </text>
    <text x="600" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      LLM → Chat → Streaming
    </text>
    <text x="600" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      단계별 기능 확장
    </text>
    
    <rect x="800" y="500" width="320" height="60" rx="5" fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
    <text x="960" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1f2937">
      🔧 로컬 모델 지원
    </text>
    <text x="960" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      localhost:1234 설정
    </text>
    <text x="960" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b7280">
      비용 절약 개발환경
    </text>
  </g>
  
  <!-- Code Status -->
  <g>
    <rect x="50" y="600" width="1100" height="80" rx="8" fill="#f9fafb" stroke="#d1d5db" stroke-width="1"/>
    <text x="600" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      코드 상태
    </text>
    
    <rect x="200" y="640" width="200" height="25" rx="3" fill="#10b981" opacity="0.2"/>
    <text x="300" y="657" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#059669">
      ✅ 활성: 환경설정만
    </text>
    
    <rect x="500" y="640" width="200" height="25" rx="3" fill="#6b7280" opacity="0.2"/>
    <text x="600" y="657" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
      💤 주석: 모든 모델 코드
    </text>
    
    <rect x="800" y="640" width="200" height="25" rx="3" fill="#3b82f6" opacity="0.2"/>
    <text x="900" y="657" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1e40af">
      📖 실습: 주석 해제하며 학습
    </text>
  </g>
  
  <!-- Learning Path -->
  <rect x="50" y="700" width="1100" height="50" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="1"/>
  <text x="600" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af">
    학습 경로: 환경설정 → LLM 기본 → Chat Model → Streaming
  </text>
  <text x="600" y="735" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6">
    각 단계별로 주석을 해제하며 순차적 실습 가능
  </text>
</svg>